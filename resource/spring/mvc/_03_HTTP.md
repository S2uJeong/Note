# 03_HTTP 웹 기본 지식
- port - 같은 IP 내에서 프로세스 구분
## HTTP (메서드)
### 속성
- 안전 : 호출해도 리소스를 변경하지 않는다.
- 멱등 : 한번 호출하든, 몇 번을 호출하든 결과가 똑같다.
    - 자동 복구 매커니즘에서, 클라이언트가 같은 요청을 다시 해도 되는지에 대한 판단 근거가 된다.
    - 멱등한 것 : GET, PUT, DELETE
    - 아닌 것 : POST
- 캐시가능 : 응답 결과 리소스를 캐시해서 사용해도 된다.
    - GET에서만 사용한다. POST도 가능은 하지만, 본문 내용까지 캐시 키로 구현하는것이 쉽지 않음

### 클라이언트에서 서버로 데이터 전송하는 방법
1. `GET` 정적 데이터 조회
    - 이미지, 정적 텍스트 문서
    - 쿼리 파라미터 없이 리소스 경로로 단순 조회 사용
2. `GET` 동적 데이터 조회
- 검색, 정렬 필터 증
- 쿼리 파아미터 이용
3. `Post`, `Get` HTML Form을 통한 데이터 전송
- 회원 가입, 상품 주문, 데이터 변경
- `<form anction = "/url" method = "post">`
    - `<input type = "text" name = "username">`
- Get전송방식은 파일 업로드 같은 바이너리 데이터 전송시 사용
4. HTTP API를 통한 데이터 전송
- 회원 가입, 상품 주문, 데이터 변경
- 서버 to 서버, 앱 클라이언트, 웹 클라이언트 (Ajax)
- Get : 쿼리 파라미터 활용
- Post, Put, Patch 등등 : 메시지 바디를 통해 데이터 전송
- POST와 PUT의 차이
    - URI 인지 유무
        - `Post` 클라이언트는 등록될 리소스의 URI를 모른다. POST/members  -> 서버가 생성 POST/members/100
        - `Put` 클라이언트가 리소스 URI를 알고 있어햐 한다. PUT/files/{filename}

### URI 설계 개념
- 문서
    - 단일 개념 (파일 하나, 객체 인스턴스, 데이터베이스 row)
    - /memebrs/100 , /files/star.jpg
- 컬렉션
    - 서버가 관리하는 리소스 디렉터리
    - /members
- 스토어
    - 클라이언트가 관리하는 자원 저장소
    - 클라이언트가 리소스의 URI를 알고 관리
    - /files
- 컨트롤러, 컨트롤 URI
    - 문서, 컬렉션, 스토어로 해결하기 어려운 추가 프로세스 실행
    - 동사를 직접 사용
    - /members/{id}/delete

## 상태코드
- 1xx : 요청이 수신되어 처리중
- 2xx : 요청 정상 처리
- 3xx : 요청을 완료하려면 추가 행동이 필요
- 4xx : 클라이언트 오류
- 5xx : 서버 오류

### 리다이렉션
- 웹 브라우저는 3xx 응답의 결과에 Location 헤더가 있으면, Location 위치로 자동 이동한다.
- 종류
    - 영구 : 특정 리소스의 URI가 영구적으로 이동
        - /members -> /users
        - /event -> /new-event
        - 리다이렉션시 요청 본문을 유지하는 것과 안하는 코드가 분류됨
    - 일시 리다이렉션 : 일시적인 변경
        - 주문 완료 후 주문 내역 화면으로 이동
        - PRG : Post/Redirect/Get
        - 해당 기능으로 새로고침 이슈로 post가 두번 전송되어 중복 주문및 실행을 방지 한다.
        - 리다이렉션시 요청 메서드가 Get으로 바뀜 유무, 본문 제거 유무에 따라 코드가 분류됨
    - 특수 리다이렉션 : 결과 대신 캐시를 사용

## Header
- 활용 기능 : Authorization, cookie, 캐시
- 캐시와 쿠키의 차이
    - 캐시는 웹 페이지나 리소스의 임시 저장소로 사용되어 로딩 속도를 향상시키고 네트워크 트래픽을 줄이는 데 사용되고, 쿠키는 클라이언트와 서버 간의 상태 정보를 유지하고 사용자를 식별하는 데 사용됩니다.
### 쿠키
- 보안 사용
    - Secure
        - 쿠키는 http, https 구분하지 않고 전송
        - Secure을 적용하면 https인 경우에만 전송한다.
    - HttpOnly
        - XSS 공격방지
        - 자바스크립트에서 접근 불가
        - HTTP 전송에만 사용
    - SameSite
        - XSRF 공격 방지
        - 요청 도메인과 쿠키에 설정된 도메인이 같은 경우만 쿠키 전송

### 캐시
- 데이터가 변경 되지 않는다면 데이터를 다시 다운 받지 않고 캐시에 있던것을 꺼내 쓰게 함으로써, 네트워크 비용을 줄임
- 캐시 유효 시간이 지나면, 해당 데이터의 최종 수정일을 체크하여 첫 요청 받은 시간보다 후시간대이면 다시 다운로드를 하여 Body에 담아 응답하고, 아니라면 Body 없이 응답한다.(304 Not Modified)
    - ETag를 활용하여 검증하기도 한다.
- 프록시캐시
    - 미국과 한국의 여러 브라우저가 연결된다고 할 때, 각 한국 브라우저가 미국의 원서버까지 도달하는 시간이 오래 걸린다.
    - 이를 해결하고사 public한 캐시 서버를 한국에 만드는 것이 프록시 캐시 서버이다.
    - 각 웹 브라우저는 private하고 이 public한 캐시 서버에 연결하여 사용
    - 활용
        - 캐시 지시어로 프록시 캐시에서만 검증할건지, 원서버까지 올라가서 검증 후 캐시를 업데이트 한건지 판단 가능 
